{
  "html": "<p>As an application grows and more and more advanced states and views are added, you may\nfind yourself in situations where one seemingly simple change in state requires\ninteractions with a lot of objects. To prevent this, it may prove useful to create a\ncentralized place for the entire state of the application.</p>\n<p>You can implement it like a god object:</p>\n<pre><code class=\"lang-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> mutating <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'tweed'</span>\n\n<span class=\"token keyword\">class</span><span class=\"token class-name\"> WorldState</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token annotation\">@mutating</span> todoPopupIsShown <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n  <span class=\"token annotation\">@mutating</span> todos <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token annotation\">@mutating</span> todoInputText <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre><p>However, this results in a huge object which probably is really cumbersome to work with.</p>\n<h3 id=\"enter-harris\">Enter Harris</h3>\n<p>Harris is a state management library that instead of focusing on the state of the data\nfocuses on the mutations applied to the data. Instead of having the different parts of the\napplication change the properties of a god object, they dispatch actions to an opaque\nstate container which is preconfigured to support those actions, taking the data from its\nprevious state to the next.</p>\n<p>Imagine a simple counter, with <code><span class=\"token operator\">+</span></code> and <code>–</code> buttons. What actions should they dispatch?</p>\n<example-slot></example-slot><blockquote>\n<p><strong>Note:</strong> We will later use that <code><span class=\"token keyword\">type</span></code> property to distinguish between different\nactions. If you&#39;re using TypeScript, we can add literal type annotations to make the\ncompiler understand that distinction.</p>\n</blockquote>\n<p>Next, we create an <code>Update</code>, which represents the transition from one state to another. In\nour example, the model consists of a simple <code><span class=\"token keyword\">number</span></code>.</p>\n<example-slot></example-slot><blockquote>\n<p><strong>Note:</strong> Again, if you&#39;re using TypeScript, notice that the compiler can figure out\nthat inside the <code><span class=\"token string\">'Increment'</span></code> case, <code>action</code> must be an <code>IncrementAction</code>. This makes\nthe switch/case type safe, and enables IDEs and editors to hint on data contained in the\naction object.</p>\n</blockquote>\n<p>Finally, we create a <code>Store</code> from the update function, which will hold the state of the\nmodel and receive actions.</p>\n<example-slot></example-slot><p>We can get the state of the store with <code>counterStore<span class=\"token punctuation\">.</span>state</code>, or we can subscribe to\nupdates with <code>counterStore<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>state <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token operator\">...</span><span class=\"token punctuation\">)</span></code>.</p>\n<p>Or, most likely in a Tweed app, we can just inject the store and start using the state it\ndirectly. A Harris Store uses the <code><span class=\"token annotation\">@mutating</span></code> decorator to tell Tweed to rerender when the\nstate is updated.</p>\n<example-slot></example-slot><p>Put together, a working Tweed app could look like this:</p>\n<example-slot></example-slot><h3 id=\"joining-and-combining-updates\">Joining and Combining Updates</h3>\n<p>Instead of creating multiple stores for the different parts of your application—which\nwould defeat the purpose a bit—we can merge multiple Updates and create a single store\nfrom that. If you want to add actions to the same model without adding more cases to an\nexisting Update, you can use <code>Update<span class=\"token punctuation\">.</span>join</code>:</p>\n<example-slot></example-slot><p>If you need to create an update for a completely different model, we can combine multiple\nupdates in an object, effectively creating a new update for an object model. We do this by\nusing <code>Update<span class=\"token punctuation\">.</span>combine</code>:</p>\n<example-slot></example-slot><p>We can now dispatch actions for both the counter and the filter to the same <code>Store</code>, whose\nstate now consists of an object containing the states for both components.</p>\n<pre><code class=\"lang-typescript\">appStore<span class=\"token punctuation\">.</span>state <span class=\"token comment\" spellcheck=\"true\">// { counter: 0, filter: '' }</span>\n\nappStore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span><span class=\"token class-name\"> IncrementAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nappStore<span class=\"token punctuation\">.</span>state <span class=\"token comment\" spellcheck=\"true\">// { counter: 1, filter: '' }</span>\n\nappStore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span><span class=\"token class-name\"> SetFilterTextAction</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nappStore<span class=\"token punctuation\">.</span>state <span class=\"token comment\" spellcheck=\"true\">// { counter: 1, filter: 'x' }</span></code></pre>",
  "examples": [
    {
      "javascript": "<pre><code class=\"lang-javascript\"><span class=\"token keyword\">class</span><span class=\"token class-name\"> IncrementAction</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">type</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Increment'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span><span class=\"token class-name\"> DecrementAction</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">type</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Decrement'</span>\n<span class=\"token punctuation\">}</span></code></pre>",
      "typescript": "<pre><code class=\"lang-typescript\"><span class=\"token keyword\">class</span><span class=\"token class-name\"> IncrementAction</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">readonly</span> <span class=\"token keyword\">type</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Increment'</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Increment'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span><span class=\"token class-name\"> DecrementAction</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">readonly</span> <span class=\"token keyword\">type</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Decrement'</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Decrement'</span>\n<span class=\"token punctuation\">}</span></code></pre>",
      "fiddle": false
    },
    {
      "javascript": "<pre><code class=\"lang-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">counterUpdate </span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span><span class=\"token keyword\">type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'Increment'</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> state <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'Decrement'</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> state <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> state\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>",
      "typescript": "<pre><code class=\"lang-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\"> Update</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'harris'</span>\n\n<span class=\"token keyword\">type</span><span class=\"token class-name\"> CounterModel</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">number</span>\n<span class=\"token keyword\">type</span><span class=\"token class-name\"> CounterAction</span> <span class=\"token operator\">=</span> IncrementAction <span class=\"token operator\">|</span> DecrementAction\n\n<span class=\"token keyword\">const</span> counterUpdate<span class=\"token punctuation\">:</span><span class=\"token class-name\"> Update</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">CounterModel</span><span class=\"token punctuation\">,</span><span class=\"token class-name\"> CounterAction</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span>\n  <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">:</span><span class=\"token class-name\"> CounterModel</span><span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">:</span><span class=\"token class-name\"> CounterAction</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><span class=\"token class-name\"> CounterModel</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span><span class=\"token keyword\">type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'Increment'</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> state <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'Decrement'</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> state <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n      <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> state\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre>",
      "fiddle": false
    },
    {
      "javascript": "<pre><code class=\"lang-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\"> Store</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'harris'</span>\n\n<span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token keyword\">const</span> counterStore <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span><span class=\"token class-name\"> Store</span><span class=\"token punctuation\">(</span>initialState<span class=\"token punctuation\">,</span> counterUpdate<span class=\"token punctuation\">)</span></code></pre>",
      "typescript": "<pre><code class=\"lang-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\"> Store</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'harris'</span>\n\n<span class=\"token keyword\">const</span> initialState<span class=\"token punctuation\">:</span><span class=\"token class-name\"> CounterModel</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token keyword\">const</span> counterStore <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span><span class=\"token class-name\"> Store</span><span class=\"token punctuation\">(</span>initialState<span class=\"token punctuation\">,</span> counterUpdate<span class=\"token punctuation\">)</span></code></pre>",
      "fiddle": false
    },
    {
      "javascript": "<pre><code class=\"lang-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\"> Node</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'tweed'</span>\n\n<span class=\"token keyword\">class</span><span class=\"token class-name\"> CounterView</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">constructor</span> <span class=\"token punctuation\">(</span>counterStore<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_counterStore <span class=\"token operator\">=</span> counterStore\n  <span class=\"token punctuation\">}</span>\n\n  _<span class=\"token function\">increment </span><span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_counterStore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span><span class=\"token class-name\"> IncrementAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  _<span class=\"token function\">decrement </span><span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_counterStore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span><span class=\"token class-name\"> DecrementAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">render </span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">on-click</span><span class=\"token script language-javascript\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_increment<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token operator\">+</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_counterStore<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">}</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">on-click</span><span class=\"token script language-javascript\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_decrement<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span>–<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>",
      "typescript": "<pre><code class=\"lang-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\"> Node</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'tweed'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\"> Store</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'harris'</span>\n\n<span class=\"token keyword\">class</span><span class=\"token class-name\"> CounterView</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">constructor</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> _counterStore<span class=\"token punctuation\">:</span><span class=\"token class-name\"> Store</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">CounterModel</span><span class=\"token punctuation\">,</span><span class=\"token class-name\"> CounterAction</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">private</span> _<span class=\"token function\">increment </span><span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_counterStore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span><span class=\"token class-name\"> IncrementAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">private</span> _<span class=\"token function\">decrement </span><span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_counterStore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span><span class=\"token class-name\"> DecrementAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">render </span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><span class=\"token class-name\"> Node</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">on-click</span><span class=\"token script language-javascript\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_increment<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token operator\">+</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_counterStore<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">}</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">on-click</span><span class=\"token script language-javascript\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_decrement<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span>–<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>",
      "fiddle": false
    },
    {
      "javascript": "<pre><code class=\"lang-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\"> Node</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'tweed'</span>\n<span class=\"token keyword\">import</span> render <span class=\"token keyword\">from</span> <span class=\"token string\">'tweed/render/dom'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\"> Store</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'harris'</span>\n\n<span class=\"token keyword\">class</span><span class=\"token class-name\"> IncrementAction</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">type</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Increment'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span><span class=\"token class-name\"> DecrementAction</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">type</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Decrement'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">counterUpdate </span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span><span class=\"token keyword\">type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'Increment'</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> state <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'Decrement'</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> state <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> state\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span><span class=\"token class-name\"> CounterView</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">constructor</span> <span class=\"token punctuation\">(</span>counterStore<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_counterStore <span class=\"token operator\">=</span> counterStore\n  <span class=\"token punctuation\">}</span>\n\n  _<span class=\"token function\">increment </span><span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_counterStore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span><span class=\"token class-name\"> IncrementAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  _<span class=\"token function\">decrement </span><span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_counterStore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span><span class=\"token class-name\"> DecrementAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">render </span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">on-click</span><span class=\"token script language-javascript\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_increment<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token operator\">+</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_counterStore<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">}</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">on-click</span><span class=\"token script language-javascript\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_decrement<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span>–<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token keyword\">const</span> counterStore <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span><span class=\"token class-name\"> Store</span><span class=\"token punctuation\">(</span>initialState<span class=\"token punctuation\">,</span> counterUpdate<span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span><span class=\"token class-name\"> CounterView</span><span class=\"token punctuation\">(</span>counterStore<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#app'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>",
      "typescript": "<pre><code class=\"lang-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\"> Node</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'tweed'</span>\n<span class=\"token keyword\">import</span> render <span class=\"token keyword\">from</span> <span class=\"token string\">'tweed/render/dom'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\"> Update</span><span class=\"token punctuation\">,</span><span class=\"token class-name\"> Store</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'harris'</span>\n\n<span class=\"token keyword\">class</span><span class=\"token class-name\"> IncrementAction</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">readonly</span> <span class=\"token keyword\">type</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Increment'</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Increment'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span><span class=\"token class-name\"> DecrementAction</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">readonly</span> <span class=\"token keyword\">type</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Decrement'</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Decrement'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span><span class=\"token class-name\"> CounterModel</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">number</span>\n<span class=\"token keyword\">type</span><span class=\"token class-name\"> CounterAction</span> <span class=\"token operator\">=</span> IncrementAction <span class=\"token operator\">|</span> DecrementAction\n\n<span class=\"token keyword\">const</span> counterUpdate<span class=\"token punctuation\">:</span><span class=\"token class-name\"> Update</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">CounterModel</span><span class=\"token punctuation\">,</span><span class=\"token class-name\"> CounterAction</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span>\n  <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">:</span><span class=\"token class-name\"> CounterModel</span><span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">:</span><span class=\"token class-name\"> CounterAction</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><span class=\"token class-name\"> CounterModel</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span><span class=\"token keyword\">type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'Increment'</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> state <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'Decrement'</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> state <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n      <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> state\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span><span class=\"token class-name\"> CounterView</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">constructor</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> _counterStore<span class=\"token punctuation\">:</span><span class=\"token class-name\"> Store</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">CounterModel</span><span class=\"token punctuation\">,</span><span class=\"token class-name\"> CounterAction</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">private</span> _<span class=\"token function\">increment </span><span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_counterStore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span><span class=\"token class-name\"> IncrementAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">private</span> _<span class=\"token function\">decrement </span><span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_counterStore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span><span class=\"token class-name\"> DecrementAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">render </span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><span class=\"token class-name\"> Node</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">on-click</span><span class=\"token script language-javascript\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_increment<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token operator\">+</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_counterStore<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">}</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">on-click</span><span class=\"token script language-javascript\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_decrement<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span>–<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token keyword\">const</span> counterStore <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span><span class=\"token class-name\"> Store</span><span class=\"token punctuation\">(</span>initialState<span class=\"token punctuation\">,</span> counterUpdate<span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span><span class=\"token class-name\"> CounterView</span><span class=\"token punctuation\">(</span>counterStore<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#app'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>",
      "fiddle": false
    },
    {
      "javascript": "<pre><code class=\"lang-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\"> Update</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'harris'</span>\n\n<span class=\"token keyword\">class</span><span class=\"token class-name\"> AddAction</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">type</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Add'</span>\n\n  <span class=\"token keyword\">constructor</span> <span class=\"token punctuation\">(</span>amount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>amount <span class=\"token operator\">=</span> amount\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">counterUpdatePatch </span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span><span class=\"token keyword\">type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'Add'</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> state <span class=\"token operator\">+</span> action<span class=\"token punctuation\">.</span>amount\n    <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> state\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">// Merged update</span>\n<span class=\"token keyword\">const</span> newCounterUpdate <span class=\"token operator\">=</span> Update<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>counterUpdate<span class=\"token punctuation\">,</span> counterUpdatePatch<span class=\"token punctuation\">)</span></code></pre>",
      "typescript": "<pre><code class=\"lang-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\"> Update</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'harris'</span>\n\n<span class=\"token keyword\">class</span><span class=\"token class-name\"> AddAction</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">readonly</span> <span class=\"token keyword\">type</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Add'</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Add'</span>\n\n  <span class=\"token keyword\">constructor</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">public</span> amount<span class=\"token punctuation\">:</span> <span class=\"token keyword\">number</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> counterUpdatePatch<span class=\"token punctuation\">:</span><span class=\"token class-name\"> Update</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">CounterModel</span><span class=\"token punctuation\">,</span><span class=\"token class-name\"> CounterAction</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span>\n  <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">:</span><span class=\"token class-name\"> CounterModel</span><span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">:</span><span class=\"token class-name\"> CounterAction</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><span class=\"token class-name\"> CounterModel</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span><span class=\"token keyword\">type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'Add'</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> state <span class=\"token operator\">+</span> action<span class=\"token punctuation\">.</span>amount\n      <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> state\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">// Merged update</span>\n<span class=\"token keyword\">const</span> newCounterUpdate <span class=\"token operator\">=</span> Update<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>counterUpdate<span class=\"token punctuation\">,</span> counterUpdatePatch<span class=\"token punctuation\">)</span></code></pre>",
      "fiddle": false
    },
    {
      "javascript": "<pre><code class=\"lang-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\"> Update</span><span class=\"token punctuation\">,</span><span class=\"token class-name\"> Store</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'harris'</span>\n\n<span class=\"token keyword\">class</span><span class=\"token class-name\"> SetFilterTextAction</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">type</span> <span class=\"token operator\">=</span> <span class=\"token string\">'SetFilterText'</span>\n\n  <span class=\"token keyword\">constructor</span> <span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> text\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">filterUpdate </span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span><span class=\"token keyword\">type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'SetFilterText'</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> action<span class=\"token punctuation\">.</span>text\n    <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> state\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">// Merged update</span>\n<span class=\"token keyword\">const</span> appUpdate <span class=\"token operator\">=</span> Update<span class=\"token punctuation\">.</span><span class=\"token function\">combine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  counter<span class=\"token punctuation\">:</span> counterUpdate<span class=\"token punctuation\">,</span>\n  filter<span class=\"token punctuation\">:</span> filterUpdate\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> counter<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> filter<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> appStore <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span><span class=\"token class-name\"> Store</span><span class=\"token punctuation\">(</span>initialState<span class=\"token punctuation\">,</span> appUpdate<span class=\"token punctuation\">)</span></code></pre>",
      "typescript": "<pre><code class=\"lang-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\"> Update</span><span class=\"token punctuation\">,</span><span class=\"token class-name\"> Store</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'harris'</span>\n\n<span class=\"token keyword\">class</span><span class=\"token class-name\"> SetFilterTextAction</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">type</span> <span class=\"token operator\">=</span> <span class=\"token string\">'SetFilterText'</span>\n\n  <span class=\"token keyword\">constructor</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">readonly</span> text<span class=\"token punctuation\">:</span> <span class=\"token keyword\">string</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span><span class=\"token class-name\"> FilterModel</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">string</span>\n<span class=\"token keyword\">type</span><span class=\"token class-name\"> FilterAction</span> <span class=\"token operator\">=</span> SetFilterTextAction <span class=\"token operator\">|</span> <span class=\"token operator\">...</span>\n\n<span class=\"token keyword\">const</span> filterUpdate<span class=\"token punctuation\">:</span><span class=\"token class-name\"> Update</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">FilterModel</span><span class=\"token punctuation\">,</span><span class=\"token class-name\"> FilterAction</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span>\n  <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">:</span><span class=\"token class-name\"> FilterModel</span><span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">:</span><span class=\"token class-name\"> FilterAction</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><span class=\"token class-name\"> FilterModel</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span><span class=\"token keyword\">type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'SetFilterText'</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> action<span class=\"token punctuation\">.</span>text\n      <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> state\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span><span class=\"token class-name\"> AppModel</span> <span class=\"token punctuation\">{</span>\n  counter<span class=\"token punctuation\">:</span><span class=\"token class-name\"> CounterModel</span>\n  filter<span class=\"token punctuation\">:</span><span class=\"token class-name\"> FilterModel</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">type</span><span class=\"token class-name\"> AppAction</span> <span class=\"token operator\">=</span> CounterAction <span class=\"token operator\">|</span> FilterAction\n\n<span class=\"token comment\" spellcheck=\"true\">// Merged update</span>\n<span class=\"token keyword\">const</span> appUpdate<span class=\"token punctuation\">:</span><span class=\"token class-name\"> Update</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">AppModel</span><span class=\"token punctuation\">,</span><span class=\"token class-name\"> AppAction</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> Update<span class=\"token punctuation\">.</span><span class=\"token function\">combine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  counter<span class=\"token punctuation\">:</span> counterUpdate<span class=\"token punctuation\">,</span>\n  filter<span class=\"token punctuation\">:</span> filterUpdate\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> initialState<span class=\"token punctuation\">:</span><span class=\"token class-name\"> AppModel</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> counter<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> filter<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> appStore <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span><span class=\"token class-name\"> Store</span><span class=\"token punctuation\">(</span>initialState<span class=\"token punctuation\">,</span> appUpdate<span class=\"token punctuation\">)</span></code></pre>",
      "fiddle": false
    }
  ]
}